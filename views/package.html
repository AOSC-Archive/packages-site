{% extends "base.html" %}
{% block title %}{{ pkg['name'] }} - AOSC Packages{% endblock %}
{% block banner %}<h1>{{ pkg['name'] }}
{% if pkg['version'] %}<span class="pkg-version">{{ pkg['version'] }}</span>{% if pkg['release'] %}-<span class="pkg-version pkg-release">{{ pkg['release'] }}</span>{% endif %}{% endif %}
</h1>
<p class="pkg-description">{{ pkg['description'] }}</p>
{% endblock %}

{% block main %}
<div class="package" id="{{ pkg['name'] }}">
{% if pkg['tree'] -%}
<p><b class="pkg-field">Source</b>: <a href="https://github.com/AOSC-Dev/{{ pkg['tree'] }}/tree/{{ pkg['branch'] }}/{{ pkg['category'] + '-' if pkg['category'] else '' }}{{ pkg['section'] }}/{{ pkg['directory'] }}"><span class="pkg-section">{{ pkg['tree'] }}/{{ pkg['category'] + '-' if pkg['category'] else '' }}{{ pkg['section'] }}/</span>{{ pkg['directory'] }}</a></p>
{%- else -%}
<p><b class="pkg-field">Source</b>: (missing)</p>
{%- endif %}
{% if pkg['dependency'] -%}
{% for rel in dep_rel -%}
{% if rel in pkg['dependency'] -%}<p>
<b class="pkg-field pkg-dep-rel">{{ dep_rel[rel] }}</b>:
{% for dep in pkg['dependency'][rel] -%}
<span class="pkg-dep"><a href="{{ dep[0] }}">{{ dep[0] }}</a>{{ dep[1] }}</span>
{% endfor %}
</p>{%- endif %}
{%- endfor %}
<p><b class="pkg-field">Links</b>:
<a href="/changelog/{{ pkg['name']|urlencode }}">Changelog</a>,
{% if pkg['srctype'] -%}
{% if 'srcurl_base' in pkg -%}
<a href="{{ pkg['srcurl_base'] }}">Upstream source</a>
<a href="{{ pkg['srcurl'] }}">({{ pkg['srctype'] }})</a>,
{%- else -%}
<a href="{{ pkg['srcurl'] }}">Upstream source ({{ pkg['srctype'] }})</a>,
{%- endif %}
{%- endif %}
{% if pkg['hasrevdep'] -%}
<a href="/revdep/{{ pkg['name']|urlencode }}">Reverse dependency</a>,
{%- endif %}
<a href="https://github.com/AOSC-Dev/{{ pkg['tree'] }}/issues/new?title={{ pkg['name']|urlencode }}%3A%20">Report issues</a></p>
{%- endif %}
<h2>Available versions</h2>
{% if pkg['full_version'] is none -%}
<p class="pkg-deprecated">(Deprecated)</p>
{% endif -%}
<div class="table-wrapper">
<table class="packages">
<thead>
  <tr>
    <th>Version</th>
    {% for version in pkg['versions'] -%}
    <th class="dpkg-ver">{{ version }}</th>
    {%- endfor %}
  </tr>
</thead>
<tbody>
{% for row in pkg['dpkg_matrix'] -%}
  <tr>
    <td>{{ row[0] }}</td>
    {% for col in row[1] -%}
      {% if col -%}
      {% if col['testing'] -%}
      <td class="dpkg dpkg-testing" title="testing">
      {%- else -%}<td class="dpkg">{%- endif %}
        <a href="https://repo.aosc.io/{{ repos[col['repo']]['path'] }}/{{ col['filename'] }}">
          {{ col['size']|sizeof_fmt }}
        </a>
      </td>{%- else -%}<td class="dpkg dpkg-missing"></td>
      {%- endif %}
    {%- endfor %}
  </tr>
{%- endfor %}
</tbody>
</table>
</div>
</div>
{% endblock main %}
